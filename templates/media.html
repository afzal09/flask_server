<!DOCTYPE html>
<html>
<head>
    <title>Media Viewer</title>
</head>
<body>
    <h1>Viewing File: {{ file }}</h1>

    {% if file_type in ['.png', '.jpg', '.jpeg', '.gif'] %}
        <img id="media" src="/{{ file }}" alt="Image" style="max-width: 100%; height: auto;">
    {% elif file_type in ['.mp4', '.webm'] %}
        <video id="media" controls style="max-width: 100%; height: auto;">
            <source src="/{{ file }}" type="video/{{ file_type[1:] }}">
            Your browser does not support the video tag.
        </video>
    {% else %}
        <p>Unsupported file type.</p>
    {% endif %}

    <a href="{{ url_for('index') }}">Back to Home</a>

    <script>
        // Function to toggle fullscreen
        function toggleFullscreen(mediaElement) {
            if (!document.fullscreenElement) {
                if (mediaElement.requestFullscreen) {
                    mediaElement.requestFullscreen();
                } else if (mediaElement.webkitRequestFullscreen) { // Safari
                    mediaElement.webkitRequestFullscreen();
                } else if (mediaElement.msRequestFullscreen) { // IE/Edge
                    mediaElement.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { // Safari
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { // IE/Edge
                    document.msExitFullscreen();
                }
            }
        }

        // Add keybinding for fullscreen (Ctrl + F)
        document.addEventListener('keydown', function(event) {
            const mediaElement = document.getElementById('media');
            if (event.key === 'f' || event.key === 'F') {
                if (event.ctrlKey) {
                    event.preventDefault(); // Prevent the browser's default find action
                    toggleFullscreen(mediaElement);
                }
            }
        });
    </script>
</body>
</html>
